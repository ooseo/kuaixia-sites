快侠镜像站群安装步骤


准备阶段

1 采购服务器
	配置 8Core 16GMEM 240GSSD 10M
	系统 Centos7.2 不支持windows

2 解析域名（略）
	www.zhupi.net (后台)
	20383.cn
	zhuaishou.com
	aipaila.com
	chadomain.com

3 安装宝塔面板和宝塔终端（略）

=========================

安装阶段

1 环境搭建
	nginx 1.16 或者1.18
	php 7.2 (* php只能是7.0 - 7.2)
	mysql 5.6 或者 5.7 
	redis 6.0 
等待的时候可以创建网站

2 安装PHP扩展和解密扩展
	fileinfo
	redis
	yaf
	readline

	终端安装safegou解密扩展 （宝塔终端自己链接）
	https://github.com/ooseo/safegou
	注意  此处的php-config 为刚才安装php7.2的php-config
	/www/server/php/72/lib/php/extensions/no-debug-non-zts-20170718/ 此目录为php7.2的扩展目录，等会配置要用到

3 网站配置
	见项目文档中的config.txt
	先配置nginx 主要是伪静态和配置文件中静态文件路径配置 
	再配置php 主要是禁用函数和php.ini中的扩展（yaf和safegou）配置
	配置完PHP扩展后要重启php
	
4 数据库
	创建数据库  字符集必须是utf8
	本地导入项目中的 初始化sql文件 kuaixia-sites-init.sql

5 项目配置
	安装composer.json 
	切换到www用户，刚才切换不过来是因为www用户禁用了bash
	vim /etc/passwd 修改一下就好了
	进入项目目录 /www/wwwroot/www.zhupi.net/kuaixia-sites-master
	执行 php /usr/bin/composer install
	目录中会多出一个vendor目录和composer.lock文件
	修改项目配置文件
	将config目录下面的application.development.ini 重命名为 application.product.ini
	[development] 改为[product]
	 
	修改数据库配置
	修改redis配置
	修改后台访问域名配置
	修改授权令牌配置	


遇到的问题
	****刚才的问题是没有重启php-fpm, 解密扩展没有生效****

	****这个问题是配置文件有个重要的地方没有改 [development] 改为[product]****

	****redis服务连接的密码机制有问题，代码中已经修复****


总结

出现如下界面大功告成，下次分享站群配置和自动化的部署
后台默认账户 admin 密码 qq123321










	
